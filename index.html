<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartHome Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="assets/logo1.png" alt="Logo" class="sidebar-logo-img" />
                <button class="sidebar-settings">‚öôÔ∏è</button>
            </div>
            <div class="sidebar-location-select" style="padding: 0 1.5rem 1rem 1.5rem;">
                <select id="system-location-dropdown" style="width:100%;padding:0.5rem 1rem;border-radius:8px;font-size:1rem;">
                    <option value="home">Your Home</option>
                    <option value="parent">Your Parent Home</option>
                    <option value="office">Your Office</option>
                </select>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active"><span>üè†</span> Dashboard</li>
                    <li><span>üì∫</span> Devices</li>
                    <li id="schedule-tab"><span>‚è∞</span> Schedule</li>
                    <li><span>üìä</span> Analytics</li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <span id="notification-bell" class="notification-bell">
                    üîî Notifications
                    <span id="notification-badge" class="notification-badge" style="display:none;"></span>
                </span>
            </div>
        </aside>
        <main class="main-content">
            <header class="main-header">
                <h2 id="main-header-title">Dashboard</h2>
                <div class="main-header-actions">
                    <select id="sort-devices-dropdown" class="sort-dropdown">
                        <option value="name-asc">Sort by Name (A-Z)</option>
                        <option value="name-desc">Sort by Name (Z-A)</option>
                        <option value="status-on">Sort by Status (On First)</option>
                        <option value="status-off">Sort by Status (Off First)</option>
                    </select>
                    <input type="text" placeholder="Search devices..." class="search-input" />
                </div>
            </header>
            <nav class="tab-nav">
                <ul id="room-tabs">
                    <li class="active">All Devices</li>
                    <!-- Room tabs will be rendered here -->
                </ul>
            </nav>
            <section id="device-groups" style="display:none;">
                <!-- Device groups and cards will be rendered here by app.js -->
            </section>
            <section id="schedule-section" style="display:none;">
                <div class="main-header">
                    <h2>Habit Schedule</h2>
                    <button id="add-event-btn" style="padding:0.5rem 1rem;border-radius:6px;background:#6a93cb;color:#fff;border:none;cursor:pointer;">Add Event</button>
                </div>
                <div id="schedule-events-container" class="schedule-events-container">
                    <!-- Event flexboxes will be rendered here -->
                </div>
            </section>
            <section id="dashboard-section">
                <div class="dashboard-top-row" style="display:flex;gap:2rem;margin-bottom:2rem;">
                    <div class="dashboard-summary-card" style="flex:1;"></div>
                    <div class="dashboard-line-chart" style="flex:2;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:1.5rem;">
                        <canvas id="energy-line-chart" height="120"></canvas>
                    </div>
                </div>
                <div class="dashboard-bottom-row" style="display:flex;gap:2rem;">
                    <div class="dashboard-room-status" style="flex:1;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:1.5rem;">
                        <h3>Room Status Overview</h3>
                        <div id="room-status-chart"></div>
                    </div>
                    <div class="dashboard-quick-actions" style="flex:0.7;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:1.5rem;display:flex;flex-direction:column;align-items:center;">
                        <h3>Quick Actions</h3>
                        <button class="quick-action-btn" data-action="all-on">Turn All On</button>
                        <button class="quick-action-btn" data-action="all-off">Turn All Off</button>
                        <button class="quick-action-btn" data-action="reset">Reset Devices</button>
                    </div>
                    <div class="dashboard-activity-log" style="flex:1.2;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:1.5rem;display:flex;flex-direction:column;">
                        <h3>Recent Activity Log</h3>
                        <ul id="dashboard-activity-list" style="overflow-y:auto;max-height:220px;padding-left:1rem;"></ul>
                    </div>
                </div>
            </section>
            <section id="settings-section" style="display:none;">
                <div class="settings-content" style="background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:2rem;max-width:500px;margin:2rem auto;">
                    <h3>User Information</h3>
                    <div id="user-info-fields">
                        <div style="margin-bottom:1rem;"><b>Username:</b> <span id="user-info-username"></span></div>
                        <div style="margin-bottom:1rem;"><b>Email:</b> <span id="user-info-email"></span></div>
                        <div style="margin-bottom:1rem;"><b>Phone Number:</b> <span id="user-info-phone"></span></div>
                        <div style="margin-bottom:1rem;"><b>Role:</b> <span id="user-info-role"></span></div>
                    </div>
                    <hr style="margin:2rem 0;" />
                    <h3>App Settings</h3>
                    <form id="app-settings-form">
                        <label style="display:block;margin-bottom:1rem;">
                            Theme:
                            <select id="app-theme" style="width:100%;padding:0.5rem;margin-top:0.3rem;">
                                <option value="green">Green (Default)</option>
                                <option value="blue">Blue</option>
                                <option value="dark">Dark</option>
                            </select>
                        </label>
                        <button type="submit" style="background:#56ab2f;color:#fff;padding:0.6rem 1.5rem;border:none;border-radius:8px;font-size:1rem;">Save</button>
                    </form>
                    <hr style="margin:2rem 0;" />
                    <h3>Manage Locations</h3>
                    <form id="add-location-form" style="display:flex;gap:0.5rem;margin-bottom:1rem;">
                        <input type="text" id="new-location-input" placeholder="New Location Name" style="flex:1;padding:0.5rem;border-radius:8px;border:1px solid #dbe3ef;" />
                        <button type="submit" style="background:#56ab2f;color:#fff;padding:0.5rem 1.2rem;border:none;border-radius:8px;font-size:1rem;">Add</button>
                    </form>
                    <ul id="location-list" style="list-style:none;padding:0;margin:0;"></ul>
                </div>
            </section>
            <section id="analytics-section" style="display:none;">
                <div class="analytics-header">
                    <h2>Analytics Dashboard</h2>
                </div>
                <div class="analytics-grid">
                    <!-- Device Usage Statistics -->
                    <div class="analytics-card">
                        <h3>Device Usage Statistics</h3>
                        <canvas id="device-usage-chart" height="120"></canvas>
                        <div id="top-devices-list"></div>
                    </div>
                    <!-- Sensor Data Trends -->
                    <div class="analytics-card">
                        <h3>Sensor Data Trends</h3>
                        <canvas id="sensor-trends-chart" height="120"></canvas>
                    </div>
                    <!-- Automation Rule Effectiveness -->
                    <div class="analytics-card">
                        <h3>Automation Rule Effectiveness</h3>
                        <canvas id="automation-effectiveness-chart" height="120"></canvas>
                        <div id="automation-rule-list"></div>
                    </div>
                    <!-- User Behavior Insights -->
                    <div class="analytics-card">
                        <h3>User Behavior Insights</h3>
                        <canvas id="user-behavior-chart" height="120"></canvas>
                        <canvas id="user-heatmap-chart" height="120"></canvas>
                    </div>
                    <!-- Security Access Logs -->
                    <div class="analytics-card">
                        <h3>Security Access Logs</h3>
                        <canvas id="security-access-chart" height="120"></canvas>
                        <div id="access-attempts-list"></div>
                    </div>
                    <!-- Device Health Trends -->
                    <div class="analytics-card">
                        <h3>Device Health Trends</h3>
                        <canvas id="device-health-chart" height="120"></canvas>
                        <div id="device-health-list"></div>
                    </div>
                    <!-- Event Log Summary -->
                    <div class="analytics-card">
                        <h3>Event Log Summary</h3>
                        <canvas id="event-log-chart" height="120"></canvas>
                        <div id="event-type-list"></div>
                    </div>
                    <!-- Schedule vs Actual Usage -->
                    <div class="analytics-card">
                        <h3>Schedule vs Actual Usage</h3>
                        <canvas id="schedule-vs-actual-chart" height="120"></canvas>
                    </div>
                </div>
            </section>
        </main>
        <div id="notification-popup" class="notification-popup" style="display:none;">
            <div class="notification-popup-header">
                <span>Notifications</span>
                <button id="close-notification-popup">‚úñ</button>
            </div>
            <ul id="notification-list" class="notification-list"></ul>
        </div>
        <div id="device-modal" class="device-modal" style="display:none;">
            <div class="device-modal-content">
                <div class="device-modal-header">
                    <span>Edit Device</span>
                    <button id="close-device-modal">‚úñ</button>
                </div>
                <form id="device-form">
                    <label>Device Name
                        <input type="text" id="modal-device-name" required />
                    </label>
                    <label>Device Type
                        <select id="modal-device-type">
                            <option value="Light">Light</option>
                            <option value="Thermostat">Thermostat</option>
                            <option value="Camera">Camera</option>
                            <option value="Sensor">Sensor</option>
                            <option value="Plug">Plug</option>
                            <option value="Speaker">Speaker</option>
                            <option value="TV">TV</option>
                            <option value="Fan">Fan</option>
                            <option value="Door Lock">Door Lock</option>
                            <option value="Curtain">Curtain</option>
                            <option value="Humidifier">Humidifier</option>
                            <option value="Air Purifier">Air Purifier</option>
                            <option value="Vacuum">Vacuum</option>
                            <option value="Refrigerator">Refrigerator</option>
                            <option value="Washer">Washer</option>
                            <option value="Dryer">Dryer</option>
                            <option value="Oven">Oven</option>
                            <option value="Microwave">Microwave</option>
                            <option value="Router">Router</option>
                            <option value="Switch">Switch</option>
                            <option value="Alarm">Alarm</option>
                            <option value="Blinds">Blinds</option>
                            <option value="Projector">Projector</option>
                            <option value="Other">Other</option>
                        </select>
                    </label>
                    <label>Location
                        <input type="text" id="modal-device-location" list="location-suggestions" />
                        <datalist id="location-suggestions">
                            <option value="Living Room">
                            <option value="Bedroom">
                            <option value="Kitchen">
                            <option value="Garage">
                            <option value="Office">
                            <option value="Hallway">
                            <option value="Bathroom">
                            <option value="Porch">
                            <option value="Dining Room">
                            <option value="Kids Room">
                            <option value="Master Bedroom">
                            <option value="Guest Room">
                            <option value="Laundry Room">
                            <option value="Backyard">
                            <option value="Entryway">
                            <option value="Other">
                            <option value="Unassigned">
                        </datalist>
                    </label>
                    <label>Status
                        <select id="modal-device-status">
                            <option value="On">On</option>
                            <option value="Off">Off</option>
                        </select>
                    </label>
                    <div class="device-modal-actions">
                        <button type="submit" id="save-device-btn">Save</button>
                        <button type="button" id="cancel-device-btn">Cancel</button>
                        <button type="button" id="delete-device-btn" style="background:#e74c3c;color:#fff;">Delete</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="add-event-modal" class="device-modal" style="display:none;">
            <div class="device-modal-content">
                <div class="device-modal-header">
                    <span>Add Habit Event</span>
                    <button id="close-add-event-modal">‚úñ</button>
                </div>
                <form id="add-event-form">
                    <label>Event Name
                        <input type="text" id="event-name-input" required />
                    </label>
                    <label>Time
                        <input type="time" id="event-time-input" required />
                    </label>
                    <div class="device-modal-actions">
                        <button type="submit" id="save-event-btn">Save</button>
                        <button type="button" id="cancel-event-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- Device Configuration Modal for Schedule Events -->
        <div id="event-setting-modal" class="device-modal" style="display:none;">
            <div class="device-modal-content">
                <div class="device-modal-header">
                    <span>Configure Devices for Event</span>
                    <button id="close-event-setting-modal">‚úñ</button>
                </div>
                <form id="event-setting-form">
                    <div id="event-devices-list"></div>
                    <div class="device-modal-actions">
                        <button type="submit" id="save-event-setting-btn">Save</button>
                        <button type="button" id="cancel-event-setting-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/mock-data.js"></script>
    
    <!-- Core modules (load in dependency order) -->
    <script src="js/core/state.js"></script>
    <script src="js/core/notifications.js"></script>
    
    <!-- Device modules -->
    <script src="js/devices/device-icons.js"></script>
    <script src="js/devices/device-controls.js"></script>
    <script src="js/devices/device-cards.js"></script>
    
    <!-- Modal modules -->
    <script src="js/modals/device-modal.js"></script>
    
    <!-- Feature modules -->
    <script src="js/schedule/schedule.js"></script>
    <script src="js/dashboard/dashboard.js"></script>
    <script src="js/analytics/analytics.js"></script>
    <script src="js/settings/settings.js"></script>
    
    <!-- Navigation and events -->
    <script src="js/navigation/navigation.js"></script>
    <script src="js/events/event-handlers.js"></script>
    
    <!-- Main application -->
    <script src="js/app-new.js"></script>
</body>
</html>